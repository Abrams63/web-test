# Настройка электронной почты для отправки форм

Для корректной работы отправки форм с сайта, необходимо правильно настроить параметры электронной почты.

## Настройка Gmail (рекомендуется)

### 1. Включите "Менее защищенные приложения" (устаревший метод) или используйте App Passwords

#### Метод 1: App Passwords (рекомендуется)
1. Включите 2-факторную аутентификацию в вашем аккаунте Google
2. Перейдите в [Google Account Settings](https://myaccount.google.com/)
3. Выберите "Безопасность" -> "Пароли приложений"
4. Выберите "Другое (пользовательское имя приложения)" и создайте пароль
5. Используйте этот пароль в настройках SMTP

#### Метод 2: OAuth2 (наиболее безопасный, требует дополнительной настройки)
- Этот метод требует более сложной настройки с использованием OAuth2

### 2. Обновите файл .env

```env
# SMTP Settings
SMTP_USE_TLS=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=465
SMTP_USERNAME=ваш_email@gmail.com
SMTP_PASSWORD=ваш_app_password
SMTP_RECIPIENT_EMAIL=почта_получателя@gmail.com
```

### 3. Популярные почтовые сервисы

#### Gmail
- SMTP_HOST: smtp.gmail.com
- SMTP_PORT: 465 (SSL) или 587 (STARTTLS)
- SMTP_USE_SSL: true для порта 465, false для порта 587

#### Outlook/Hotmail
- SMTP_HOST: smtp-mail.outlook.com
- SMTP_PORT: 587
- SMTP_USE_TLS: true

#### Yahoo
- SMTP_HOST: smtp.mail.yahoo.com
- SMTP_PORT: 587 или 465
- SMTP_USE_TLS: true

## Диагностика проблем

### Если письма не приходят:

1. Проверьте настройки безопасности почтового сервиса
2. Убедитесь, что используете правильный пароль (App Password, а не обычный пароль)
3. Проверьте логи сервера на наличие ошибок
4. Убедитесь, что порт и протокол (SSL/STARTTLS) указаны правильно
5. Проверьте, не попадает ли письмо в папку "Спам"

### Проверка отправки:
Вы можете протестировать отправку письма с помощью команды:

```bash
curl -X POST "http://127.0.0.1:8000/mailform" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Test User",
    "email": "test@example.com",
    "message": "This is a test message",
    "phone": "+1234567890",
    "form_type": "contact"
  }'
```

## Важные замечания

- Никогда не храните файл .env в открытом репозитории
- Используйте App Passwords вместо обычных паролей для Gmail
- Убедитесь, что ваш почтовый сервис поддерживает SMTP-аутентификацию